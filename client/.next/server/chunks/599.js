exports.id=599,exports.ids=[599],exports.modules={1955:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,3579,23)),Promise.resolve().then(r.t.bind(r,619,23)),Promise.resolve().then(r.t.bind(r,1459,23)),Promise.resolve().then(r.t.bind(r,3456,23)),Promise.resolve().then(r.t.bind(r,847,23)),Promise.resolve().then(r.t.bind(r,7303,23))},468:(e,t,r)=>{Promise.resolve().then(r.bind(r,9141))},5303:()=>{},9141:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});var s=r(3854),a=r(4218),i=r(9924);function n({error:e,reset:t}){return(0,a.useEffect)(()=>{},[e]),s.jsx("html",{children:s.jsx("body",{children:s.jsx("div",{className:"min-h-screen bg-background px-4 py-16 sm:px-6 sm:py-24 md:grid md:place-items-center lg:px-8",children:s.jsx("div",{className:"mx-auto max-w-max",children:(0,s.jsxs)("main",{className:"sm:flex",children:[s.jsx("p",{className:"text-4xl font-bold tracking-tight text-primary sm:text-5xl",children:"500"}),(0,s.jsxs)("div",{className:"sm:ml-6",children:[(0,s.jsxs)("div",{className:"sm:border-l sm:border-muted-foreground/20 sm:pl-6",children:[s.jsx("h1",{className:"text-4xl font-bold tracking-tight text-foreground sm:text-5xl",children:"Something went wrong!"}),(0,s.jsxs)("p",{className:"mt-3 text-base text-muted-foreground",children:[e.message||"An unexpected error occurred",!1]})]}),(0,s.jsxs)("div",{className:"mt-10 flex space-x-3 sm:border-l sm:border-transparent sm:pl-6",children:[s.jsx(i.z,{onClick:()=>t(),children:"Try again"}),s.jsx(i.z,{variant:"outline",onClick:()=>window.location.href="/",children:"Go back home"})]})]})]})})})})})}},9924:(e,t,r)=>{"use strict";r.d(t,{z:()=>h});var s=r(3854),a=r(4218),i=r(8225),n=r(2457),o=r(8504),l=r(854);let c=(0,n.j)("inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-transparent shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),h=a.forwardRef(({className:e,variant:t,size:r,asChild:a=!1,loading:n=!1,children:h,disabled:d,...m},u)=>{let p=a?i.g7:"button";return s.jsx(p,{className:(0,o.cn)(c({variant:t,size:r,className:e})),ref:u,disabled:d||n,...m,children:n?(0,s.jsxs)(s.Fragment,{children:[s.jsx(l.Z,{className:"mr-2 h-4 w-4 animate-spin"}),h]}):h})});h.displayName="Button"},3110:(e,t,r)=>{"use strict";r.d(t,{I:()=>n});var s=r(3854),a=r(4218),i=r(8504);let n=a.forwardRef(({className:e,type:t,error:r,...a},n)=>(0,s.jsxs)("div",{className:"relative",children:[s.jsx("input",{type:t,className:(0,i.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",r&&"border-red-500 focus-visible:ring-red-500",e),ref:n,...a}),r&&s.jsx("p",{className:"mt-1 text-xs text-red-500",children:r})]}));n.displayName="Input"},9589:(e,t,r)=>{"use strict";r.d(t,{_:()=>c});var s=r(3854),a=r(4218),i=r(8820),n=r(2457),o=r(8504);let l=(0,n.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=a.forwardRef(({className:e,...t},r)=>s.jsx(i.f,{ref:r,className:(0,o.cn)(l(),e),...t}));c.displayName=i.f.displayName},7435:(e,t,r)=>{"use strict";r.d(t,{r:()=>i}),r(3854);var s=r(4218);let a=(0,s.createContext)(void 0);function i(){let e=(0,s.useContext)(a);if(void 0===e)throw Error("useLoading must be used within a LoadingProvider");return e}},4027:(e,t,r)=>{"use strict";r.d(t,{a:()=>y});var s=r(4218),a=r(1018),i=r(7294),n=r(3162);let o=process.env.NEXT_PUBLIC_API_URL||"http://localhost:5000/api";class l{constructor(){this.isRefreshing=!1,this.refreshSubscribers=[],this.handleRequest=e=>{let t=localStorage.getItem("token");return t&&(e.headers.Authorization=`Bearer ${t}`),e},this.handleRequestError=e=>Promise.reject(e),this.handleResponse=e=>e.data,this.handleResponseError=async e=>{let t=e.config;if(!t)return Promise.reject(e);if(e.response?.status===401&&!t._retry){if(this.isRefreshing)try{let e=await new Promise(e=>{this.refreshSubscribers.push(t=>{e(t)})});return t.headers.Authorization=`Bearer ${e}`,this.api(t).then(e=>e.data)}catch(e){return Promise.reject(e)}t._retry=!0,this.isRefreshing=!0;try{let{data:e}=await this.api.post("/auth/refresh"),{token:r}=e;return localStorage.setItem("token",r),this.refreshSubscribers.forEach(e=>e(r)),this.refreshSubscribers=[],t.headers.Authorization=`Bearer ${r}`,this.api(t).then(e=>e.data)}catch(e){return this.handleAuthError(),Promise.reject(e)}finally{this.isRefreshing=!1}}return this.handleError(e),Promise.reject(e)},this.api=i.Z.create({baseURL:o,headers:{"Content-Type":"application/json"},withCredentials:!0}),this.setupInterceptors()}static getInstance(){return l.instance||(l.instance=new l),l.instance}setupInterceptors(){this.api.interceptors.request.use(this.handleRequest,this.handleRequestError),this.api.interceptors.response.use(this.handleResponse,this.handleResponseError)}async refreshToken(){try{let{data:e}=await this.api.post("/auth/refresh");return e}catch(e){throw e}}handleAuthError(){localStorage.removeItem("token"),window.location.href="/login"}handleError(e){let t=this.extractErrorMessage(e);n.Am.error("Error",{description:t})}extractErrorMessage(e){if(e.response?.data){let t=e.response.data;return t.message||t.error||"An unexpected error occurred"}return e.message||"Network error occurred"}async get(e,t={}){let{data:r}=await this.api.get(e,t);return r}async post(e,t={},r={}){let s=await this.api.post(e,t,r);return s.data}async put(e,t={},r={}){let s=await this.api.put(e,t,r);return s.data}async delete(e,t={}){let r=await this.api.delete(e,t);return r.data}getAxiosInstance(){return this.api}}let c=l.getInstance();var h=r(5e3);let d="your-secure-key-here";class m{static{this.prefix="secure_"}static setItem(e,t){try{let r=h.AES.encrypt(JSON.stringify(t),d).toString();localStorage.setItem(this.prefix+e,r)}catch(e){throw Error("Failed to securely store data")}}static getItem(e){try{let t=localStorage.getItem(this.prefix+e);if(!t)return null;let r=h.AES.decrypt(t,d),s=r.toString(h.enc.Utf8);if(!s)return null;return JSON.parse(s)}catch(e){return null}}static removeItem(e){localStorage.removeItem(this.prefix+e)}static clear(){Object.keys(localStorage).filter(e=>e.startsWith(this.prefix)).forEach(e=>localStorage.removeItem(e))}}class u{static{this.MAX_ATTEMPTS=5}static{this.TIME_WINDOW=3e5}static{this.LOCKOUT_DURATION=9e5}static{this.STORAGE_KEY="rate_limit_data"}static getRateLimitData(){try{let e=localStorage.getItem(this.STORAGE_KEY);return e?JSON.parse(e):{}}catch{return{}}}static saveRateLimitData(e){localStorage.setItem(this.STORAGE_KEY,JSON.stringify(e))}static cleanupOldEntries(e){let t=Date.now();Object.entries(e).forEach(([r,s])=>{t-s.lastAttempt>this.LOCKOUT_DURATION&&delete e[r]})}static checkRateLimit(e){let t=Date.now(),r=this.getRateLimitData();this.cleanupOldEntries(r);let s=r[e]||{attempts:0,firstAttempt:t,lastAttempt:t};if(s.attempts>=this.MAX_ATTEMPTS){let e=t-s.lastAttempt;if(e<this.LOCKOUT_DURATION)return{allowed:!1,waitTime:this.LOCKOUT_DURATION-e};s.attempts=0,s.firstAttempt=t}return t-s.firstAttempt>this.TIME_WINDOW&&(s.attempts=0,s.firstAttempt=t),s.attempts++,s.lastAttempt=t,r[e]=s,this.saveRateLimitData(r),{allowed:s.attempts<=this.MAX_ATTEMPTS,waitTime:s.attempts>=this.MAX_ATTEMPTS?this.LOCKOUT_DURATION:0}}static resetRateLimit(e){let t=this.getRateLimitData();delete t[e],this.saveRateLimitData(t)}}class p{constructor(){this.BROADCAST_CHANNEL="auth_session_sync",this.heartbeatInterval=null,this.tabId=Math.random().toString(36).substring(2,15),this.listeners=new Set,this.channel=new BroadcastChannel(this.BROADCAST_CHANNEL),this.setupEventListeners(),this.startHeartbeat()}static getInstance(){return p.instance||(p.instance=new p),p.instance}setupEventListeners(){this.channel.onmessage=e=>{let t=e.data;t.tabId!==this.tabId&&this.notifyListeners(t)},document.addEventListener("visibilitychange",()=>{"visible"===document.visibilityState&&this.emit("token_refresh")}),window.addEventListener("online",()=>this.emit("token_refresh")),window.addEventListener("offline",()=>this.checkConnectivity())}startHeartbeat(){this.heartbeatInterval=setInterval(()=>{this.channel.postMessage({type:"heartbeat",timestamp:Date.now(),tabId:this.tabId})},3e4)}checkConnectivity(){navigator.onLine||this.notifyListeners({type:"session_expired",timestamp:Date.now(),tabId:this.tabId})}notifyListeners(e){this.listeners.forEach(t=>t(e))}addEventListener(e){return this.listeners.add(e),()=>this.listeners.delete(e)}emit(e){let t={type:e,timestamp:Date.now(),tabId:this.tabId};this.notifyListeners(t),this.channel.postMessage(t)}destroy(){this.heartbeatInterval&&clearInterval(this.heartbeatInterval),this.channel.close(),this.listeners.clear()}}let f="auth_token",g="auth_refresh_token",w="auth_token_expiry";class x{constructor(){this.tokenRefreshPromise=null,this.sessionManager=p.getInstance(),this.setupSessionListeners()}setupSessionListeners(){this.sessionManager.addEventListener(e=>{switch(e.type){case"logout":this.clearTokens();break;case"token_refresh":this.ensureValidToken();break;case"session_expired":this.handleSessionExpired()}})}handleSessionExpired(){this.clearTokens(),window.location.href="/login?session=expired"}setTokens(e){try{m.setItem(f,e.token),m.setItem(g,e.refreshToken),m.setItem(w,e.expiresAt),this.sessionManager.emit("token_refresh")}catch(e){throw Error("Failed to securely store authentication data")}}clearTokens(){m.removeItem(f),m.removeItem(g),m.removeItem(w),this.sessionManager.emit("logout")}getTokenData(){try{let e=m.getItem(f),t=m.getItem(g),r=m.getItem(w);if(!e||!t||!r)return null;return{token:e,refreshToken:t,expiresAt:r}}catch(e){return null}}isTokenExpired(){let e=this.getTokenData();return!e||Date.now()+3e5>=e.expiresAt}async ensureValidToken(){if(!this.isTokenExpired())return;if(this.tokenRefreshPromise){await this.tokenRefreshPromise;return}let e=this.getTokenData();if(!e?.refreshToken)throw Error("No refresh token available");this.tokenRefreshPromise=(async()=>{try{let e=await this.refreshToken();this.setTokens(e)}finally{this.tokenRefreshPromise=null}})(),await this.tokenRefreshPromise}async login(e){let t=u.checkRateLimit(`login_${e.email}`);if(!t.allowed)throw Error(`Too many login attempts. Please try again in ${Math.ceil(t.waitTime/1e3)} seconds.`);try{let t=await c.post("/auth/login",e);return this.setTokens(t),u.resetRateLimit(`login_${e.email}`),this.sessionManager.emit("login"),t}catch(e){throw this.handleError(e)}}async logout(){try{let e=this.getTokenData();e&&await c.post("/auth/logout",{refreshToken:e.refreshToken})}catch(e){}finally{this.clearTokens()}}async validateToken(){try{await this.ensureValidToken();let e=await c.get("/auth/validate");return e}catch(e){throw this.handleError(e)}}async refreshToken(){try{let e=this.getTokenData();if(!e?.refreshToken)throw Error("No refresh token available");let t=await c.post("/auth/refresh",{refreshToken:e.refreshToken});return t}catch(e){throw this.clearTokens(),this.handleError(e)}}async register(e){let t=u.checkRateLimit(`register_${e.email}`);if(!t.allowed)throw Error(`Too many registration attempts. Please try again in ${Math.ceil(t.waitTime/1e3)} seconds.`);try{let t=await c.post("/auth/register",e);return this.setTokens(t),u.resetRateLimit(`register_${e.email}`),this.sessionManager.emit("login"),t}catch(e){throw this.handleError(e)}}async requestPasswordReset(e){let t=u.checkRateLimit(`reset_${e}`);if(!t.allowed)throw Error(`Too many reset attempts. Please try again in ${Math.ceil(t.waitTime/1e3)} seconds.`);try{await c.post("/auth/reset-password-request",{email:e})}catch(e){throw this.handleError(e)}}async resetPassword(e,t){let r=u.checkRateLimit(`reset_confirm_${e}`);if(!r.allowed)throw Error(`Too many reset confirmation attempts. Please try again in ${Math.ceil(r.waitTime/1e3)} seconds.`);try{await c.post("/auth/reset-password",{token:e,newPassword:t})}catch(e){throw this.handleError(e)}}async changePassword(e,t){let r=u.checkRateLimit(`change_password_${this.getTokenData()?.token}`);if(!r.allowed)throw Error(`Too many password change attempts. Please try again in ${Math.ceil(r.waitTime/1e3)} seconds.`);try{await this.ensureValidToken(),await c.post("/auth/change-password",{currentPassword:e,newPassword:t})}catch(e){throw this.handleError(e)}}handleError(e){if(e instanceof Error){let t=Error(e.message);return"code"in e&&(t.code=e.code),"statusCode"in e&&(t.statusCode=e.statusCode),"validationErrors"in e&&(t.validationErrors=e.validationErrors),t}return Error("An unexpected error occurred")}isAuthenticated(){let e=this.getTokenData();return!!e&&!this.isTokenExpired()}}let b=new x;function y(){let[e,t]=(0,s.useState)(null),[r,i]=(0,s.useState)(!0),[n,o]=(0,s.useState)(null),l=(0,a.useRouter)(),c=(0,s.useRef)(),h=(0,s.useCallback)(async()=>{try{if(!b.isAuthenticated()){t(null),i(!1);return}let e=await b.validateToken();t(e)}catch(e){t(null),await b.logout()}finally{i(!1)}},[]);(0,s.useEffect)(()=>(h(),c.current=setInterval(h,3e5),()=>{c.current&&clearInterval(c.current)}),[h]);let d=(0,s.useCallback)(e=>{let t=e instanceof Error?e:Error("An unexpected error occurred");throw o(t),t},[]),m=async e=>{try{o(null),i(!0);let{user:r}=await b.login(e);t(r),l.push("/dashboard")}catch(e){d(e)}finally{i(!1)}},u=async()=>{try{i(!0),await b.logout(),t(null),l.push("/login")}catch(e){d(e)}finally{i(!1)}},p=async e=>{try{o(null),i(!0);let{user:r}=await b.register(e);t(r),l.push("/dashboard")}catch(e){d(e)}finally{i(!1)}},f=async e=>{try{o(null),i(!0),await b.requestPasswordReset(e)}catch(e){d(e)}finally{i(!1)}},g=async(e,t)=>{try{o(null),i(!0),await b.resetPassword(e,t),l.push("/login")}catch(e){d(e)}finally{i(!1)}},w=async(e,t)=>{try{o(null),i(!0),await b.changePassword(e,t)}catch(e){d(e)}finally{i(!1)}};return{user:e,loading:r,error:n,login:m,logout:u,register:p,requestPasswordReset:f,resetPassword:g,changePassword:w,isAuthenticated:!!e}}},5088:(e,t,r)=>{"use strict";r.d(t,{w:()=>i});var s=r(4218),a=r(1460);function i({schema:e,onSubmit:t,initialValues:r={}}){let[i,n]=(0,s.useState)(r),[o,l]=(0,s.useState)({}),[c,h]=(0,s.useState)({}),[d,m]=(0,s.useState)(!1),u=(t,r)=>{try{let s=a.z.object({[t]:e.shape[t]});s.parse({[t]:r}),l(e=>({...e,[t]:""}))}catch(e){if(e instanceof a.z.ZodError){let r=e.errors[0]?.message;l(e=>({...e,[t]:r}))}}},p=()=>{try{return e.parse(i),l({}),!0}catch(e){if(e instanceof a.z.ZodError){let t={};e.errors.forEach(e=>{e.path[0]&&(t[e.path[0]]=e.message)}),l(t)}return!1}},f=async e=>{e.preventDefault();let r=Object.keys(i).reduce((e,t)=>({...e,[t]:!0}),{});if(h(r),p()){m(!0);try{await t(i)}finally{m(!1)}}};return{values:i,errors:o,touched:c,isSubmitting:d,handleChange:e=>{let{name:t,value:r}=e.target;n(e=>({...e,[t]:r})),c[t]&&u(t,r)},handleBlur:e=>{let{name:t,value:r}=e.target;h(e=>({...e,[t]:!0})),u(t,r)},handleSubmit:f,setFieldValue:(e,t)=>{n(r=>({...r,[e]:t})),c[e]&&u(e,t)},setFieldTouched:(e,t=!0)=>{h(r=>({...r,[e]:t})),t&&u(e,i[e])},resetForm:()=>{n(r),l({}),h({}),m(!1)}}}},8504:(e,t,r)=>{"use strict";r.d(t,{cn:()=>i});var s=r(9395),a=r(1088);function i(...e){return(0,a.m6)((0,s.W)(e))}},3979:(e,t,r)=>{"use strict";r.d(t,{_N:()=>c,x9:()=>h});var s=r(3162),a=r(1460);class i extends Error{constructor(e,t="APP_ERROR",r=400){super(e),this.code=t,this.statusCode=r,this.name="AppError"}}class n extends i{constructor(e="Authentication failed"){super(e,"AUTH_ERROR",401),this.name="AuthError"}}class o extends i{constructor(e="Validation failed"){super(e,"VALIDATION_ERROR",400),this.name="ValidationError"}}class l extends i{constructor(e="Network request failed"){super(e,"NETWORK_ERROR",503),this.name="NetworkError"}}function c(e,t={}){let r=function(e){if(e instanceof a.jm){let t=e.errors[0];return t?.message||"Validation failed"}return e instanceof n||e instanceof o||e instanceof l||e instanceof Error?e.message:"An unexpected error occurred"}(e);s.Am.error(t.title||"Error",{description:t.description||r})}function h(e,t){s.Am.success(e,{description:t})}},4184:(e,t,r)=>{"use strict";r.d(t,{S4:()=>n,dm:()=>a,gY:()=>i});var s=r(1460);let a=s.z.object({email:s.z.string().min(1,"Email is required").email("Please enter a valid email address"),password:s.z.string().min(1,"Password is required")}),i=s.z.object({name:s.z.string().min(1,"Name is required").min(2,"Name must be at least 2 characters").max(50,"Name must be less than 50 characters"),email:s.z.string().min(1,"Email is required").email("Please enter a valid email address"),password:s.z.string().min(1,"Password is required").min(8,"Password must be at least 8 characters").regex(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/,"Password must contain at least one uppercase letter, one lowercase letter, one number, and one special character")}),n=s.z.object({email:s.z.string().min(1,"Email is required").email("Please enter a valid email address")});s.z.object({password:s.z.string().min(1,"Password is required").min(8,"Password must be at least 8 characters").regex(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/,"Password must contain at least one uppercase letter, one lowercase letter, one number, and one special character"),confirmPassword:s.z.string().min(1,"Please confirm your password")}).refine(e=>e.password===e.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]})},1391:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});var s=r(4656);function a({children:e}){return(0,s.jsxs)("div",{className:"min-h-screen flex flex-col justify-center py-12 sm:px-6 lg:px-8 bg-background",children:[s.jsx("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:s.jsx("h2",{className:"text-center text-2xl font-bold tracking-tight",children:"Portfolio Admin"})}),s.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:s.jsx("div",{className:"bg-card px-4 py-8 shadow sm:rounded-lg sm:px-10",children:e})})]})}},6097:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>n,__esModule:()=>i,default:()=>l});var s=r(5153);let a=(0,s.createProxy)(String.raw`/Users/user/Desktop/Coding <:>/WebDev/Projects/Portfolio-OOP-project-7/client/src/app/error.tsx`),{__esModule:i,$$typeof:n}=a,o=a.default,l=o},9113:()=>{throw Error("Module build failed (from ./node_modules/next/dist/build/webpack/loaders/next-swc-loader.js):\nError: \n  \x1b[38;2;255;30;30m\xd7\x1b[0m NEXT_RSC_ERR_REACT_API: useEffect\n    ╭─[\x1b[38;2;92;157;255;1;4m/Users/user/Desktop/Coding <:>/WebDev/Projects/Portfolio-OOP-project-7/client/src/app/layout.tsx\x1b[0m:7:1]\n \x1b[2m 7\x1b[0m │ import { PerformanceMonitor } from '@/components/monitoring/performance-monitor';\n \x1b[2m 8\x1b[0m │ import { prefetchResources } from '@/lib/utils/performance';\n \x1b[2m 9\x1b[0m │ import { SkipLink } from '@/components/a11y/skip-link';\n \x1b[2m10\x1b[0m │ import { useEffect } from 'react';\n    \xb7 \x1b[38;2;246;87;248m         ─────────\x1b[0m\n \x1b[2m11\x1b[0m │ import { inter, robotoMono } from '@/lib/utils/fonts';\n \x1b[2m12\x1b[0m │ import { usePrefetch, useDNSPrefetch, usePreconnect } from '@/lib/utils/prefetch';\n    ╰────\n")}};